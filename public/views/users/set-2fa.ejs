<% title = "Set 2FA" %>
<%- include('../partials/header'); %>
<%- include ('../partials/navbar'); %>
<div class="container mx-auto p-4 bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 w-1/3">
	<h1 class="text-2xl font-bold mb-4">Set up 2FA</h1>
	<% if (error != '') { %>
	<div
		class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
		role="alert"
	>
		<strong class="font-bold">Error:</strong>
		<span class="block sm:inline"><%= error %></span>
	</div>
	<% } %>
	<p class="my-4">
		Scan the following QR code with your 2FA app to set up 2FA:
	</p>

	<div class="mx-auto mb-4">
		<img src="<%=qrCodeUrl%>" alt="2FA QR code" width="150px" height="150px" class="mx-auto" />
	</div>

	<p class="mb-4">Or, enter the following secret key manually:</p>

	<pre class="text-xs font-mono bg-gray-200 p-2 rounded-md">
<%= secret %></pre
	>

	<form action="/users/set-2fa" method="post" class="mt-4">
		<div class="mb-4">
			<input type="hidden" name="secret" value="<%= secret %>" />
			<label for="code" class="block font-bold mb-2"
				>2FA Code</label
			>
			<input
				type="text"
				class="form-input w-full"
				id="code"
				name="code"
				placeholder="Enter your 2FA code"
			/>
		</div>
		<button
			type="submit"
			class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
		>
			Verify
		</button>
	</form>
</div>
<%- include('../partials/footer'); %>
